<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ImazonGeo - Dashboards</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap">
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <style>
    :root {
      --primary-color: #007560;
      --hover-color: #005a45;
      --text-light: #ffffff;
      --text-dark: #333333;
      --sidebar-width: 320px;
      --sidebar-collapsed-width: 60px;
      --transition-speed: 0.3s;
      --topbar-height: 70px;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Roboto', sans-serif;
    }
    
    html, body {
      width: 100%;
      height: 100%;
      overflow-x: hidden; /* FORÇA ELIMINAÇÃO DA ROLAGEM HORIZONTAL */
      background: #f8f9fa;
      color: var(--text-dark);
    }
    
    body {
      display: flex;
      min-height: 100vh;
      max-width: 100vw; /* LIMITA A LARGURA MÁXIMA */
    }
    
    /* Layout Principal */
    #main-content {
      flex: 1;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      max-width: 100%; /* GARANTE QUE NÃO EXCEDA A LARGURA */
      transition: margin-left var(--transition-speed);
      margin-left: var(--sidebar-width);
      overflow-x: hidden; /* ELIMINA ROLAGEM HORIZONTAL NO CONTEÚDO */
    }
    
    body.sidebar-collapsed #main-content {
      margin-left: var(--sidebar-collapsed-width);
    }
    
    /* Sidebar */
    #sidebar {
      background: var(--primary-color);
      color: var(--text-light);
      width: var(--sidebar-width);
      max-width: var(--sidebar-width); /* LIMITA LARGURA MÁXIMA */
      height: 100vh;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      overflow-y: auto;
      overflow-x: hidden; /* ELIMINA ROLAGEM HORIZONTAL NA SIDEBAR */
      transition: width var(--transition-speed);
      box-shadow: 3px 0 15px rgba(0,0,0,0.15);
    }
    
    body.sidebar-collapsed #sidebar {
      width: var(--sidebar-collapsed-width);
      max-width: var(--sidebar-collapsed-width);
    }
    
    /* Logo e cabeçalho */
    .sidebar-header {
      padding: 15px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      border-bottom: 1px solid rgba(255,255,255,0.15);
      height: var(--topbar-height);
      max-width: 100%; /* GARANTE QUE NÃO EXCEDA */
    }
    
    .sidebar-logo {
      height: 35px;
      max-width: 200px; /* LIMITA LARGURA DO LOGO */
      filter: brightness(0) invert(1);
      transition: opacity var(--transition-speed);
    }
    
    body.sidebar-collapsed .sidebar-logo {
      opacity: 0;
      width: 0;
    }
    
    .toggle-sidebar {
      background: none;
      border: none;
      color: white;
      font-size: 1.3rem;
      cursor: pointer;
      padding: 5px;
      border-radius: 4px;
      transition: background var(--transition-speed);
      min-width: 30px; /* LARGURA MÍNIMA PARA O BOTÃO */
    }
    
    .toggle-sidebar:hover {
      background: rgba(255,255,255,0.1);
    }
    
    /* Menu e seções */
    .sidebar-menu {
      padding: 10px 0;
      width: 100%;
      max-width: 100%;
    }
    
    .menu-section {
      margin-bottom: 8px;
      width: 100%;
    }
    
    .section-header {
      padding: 10px 15px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      cursor: pointer;
      transition: background var(--transition-speed);
      width: 100%;
      max-width: 100%;
    }
    
    .section-header:hover {
      background: rgba(0,0,0,0.1);
    }
    
    .section-title {
      font-weight: 500;
      font-size: 1rem;
      display: flex;
      align-items: center;
      gap: 8px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      flex: 1;
      max-width: calc(100% - 30px); /* RESERVA ESPAÇO PARA O ÍCONE */
    }
    
    .section-icon {
      font-size: 1.1rem;
      min-width: 20px;
      flex-shrink: 0;
    }
    
    .collapse-icon {
      transition: transform var(--transition-speed);
      font-size: 1.1rem;
      min-width: 20px;
      flex-shrink: 0;
    }
    
    .section-content {
      max-height: 0;
      overflow: hidden;
      transition: max-height var(--transition-speed);
      width: 100%;
    }
    
    .section-content.expanded {
      max-height: 1000px;
    }
    
    .menu-item {
      padding: 8px 15px 8px 40px;
      display: flex;
      align-items: center;
      gap: 10px;
      color: var(--text-light);
      text-decoration: none;
      transition: background var(--transition-speed);
      font-size: 0.9rem;
      border-left: 3px solid transparent;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      width: 100%;
      max-width: 100%;
    }
    
    body.sidebar-collapsed .menu-item {
      padding: 10px 12px;
      justify-content: center;
    }
    
    body.sidebar-collapsed .menu-item span {
      display: none;
    }
    
    .menu-item:hover, 
    .menu-item.active {
      background: var(--hover-color);
      border-left: 3px solid #FFD700;
    }
    
    .menu-item-icon {
      font-size: 1rem;
      min-width: 20px;
      text-align: center;
      flex-shrink: 0;
    }
    
    /* Topbar */
    .topbar {
      background: white;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      padding: 0 20px;
      height: var(--topbar-height);
      display: flex;
      align-items: center;
      z-index: 900;
      width: 100%;
      max-width: 100%;
      overflow: hidden; /* ELIMINA QUALQUER OVERFLOW */
    }
    
    .toggle-menu-btn {
      background: var(--primary-color);
      color: white;
      border: none;
      border-radius: 4px;
      padding: 6px 12px;
      margin-right: 12px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 6px;
      transition: background var(--transition-speed);
      font-size: 0.9rem;
      flex-shrink: 0;
    }
    
    .toggle-menu-btn:hover {
      background: var(--hover-color);
    }
    
    .brand {
      font-size: 1.6rem;
      font-weight: 700;
      flex-shrink: 0;
    }
    
    .amarelo { color: #FFA500; }
    .verde { color: var(--primary-color); }
    
    /* Conteúdo */
    .content-container {
      flex: 1;
      padding: 15px;
      display: flex;
      height: calc(100vh - var(--topbar-height));
      width: 100%;
      max-width: 100%;
      overflow: hidden; /* ELIMINA OVERFLOW NO CONTAINER */
    }
    
    .dashboard-container {
      flex: 1;
      background: white;
      border-radius: 6px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.05);
      overflow: hidden;
      position: relative;
      display: flex;
      flex-direction: column;
      width: 100%;
      max-width: 100%;
    }
    
    /* IFRAME TOTALMENTE RESPONSIVO SEM ROLAGEM HORIZONTAL */
    #dashboard-iframe {
      width: 100%;
      height: 100%;
      flex: 1;
      border: none;
      min-height: 300px;
      max-width: 100%;
      overflow: hidden; /* ELIMINA QUALQUER OVERFLOW DO IFRAME */
      display: block;
    }
    
    /* Footer */
    footer {
      background: var(--primary-color);
      color: white;
      padding: 12px;
      text-align: center;
      width: 100%;
      max-width: 100%;
      overflow: hidden;
    }
    
    footer a {
      color: #FFD700;
      text-decoration: none;
      transition: color var(--transition-speed);
    }
    
    footer a:hover {
      color: white;
      text-decoration: underline;
    }
    
    .version {
      font-size: 0.85rem;
      margin-top: 4px;
      color: rgba(255,255,255,0.8);
    }
    
    /* Ícones colapsados */
    .collapsed-section {
      display: none;
      padding: 10px 0;
      width: 100%;
    }
    
    body.sidebar-collapsed .collapsed-section {
      display: block;
    }
    
    .collapsed-icon {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 10px 0;
      color: white;
      font-size: 1.3rem;
      cursor: pointer;
      transition: background var(--transition-speed);
      width: 100%;
    }
    
    .collapsed-icon:hover {
      background: var(--hover-color);
    }
    
    /* RESPONSIVIDADE APRIMORADA SEM ROLAGEM HORIZONTAL */
    @media (max-width: 992px) {
      :root {
        --sidebar-width: 280px;
        --sidebar-collapsed-width: 50px;
      }
      
      #sidebar {
        transform: translateX(-100%);
        width: var(--sidebar-width);
        max-width: var(--sidebar-width);
      }
      
      body.sidebar-expanded #sidebar {
        transform: translateX(0);
      }
      
      body #main-content {
        margin-left: 0 !important;
      }
      
      .sidebar-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.5);
        z-index: 999;
        display: none;
      }
      
      body.sidebar-expanded .sidebar-overlay {
        display: block;
      }
      
      .content-container {
        padding: 12px;
      }
      
      #dashboard-iframe {
        min-height: 280px;
      }
    }
    
    @media (max-width: 768px) {
      :root {
        --sidebar-width: 260px;
        --topbar-height: 60px;
      }
      
      .brand {
        font-size: 1.4rem;
      }
      
      .topbar {
        padding: 0 12px;
      }
      
      .content-container {
        padding: 8px;
      }
      
      .section-title span {
        font-size: 0.95rem;
      }
      
      .menu-item {
        padding: 8px 12px 8px 35px;
        font-size: 0.85rem;
      }
      
      #dashboard-iframe {
        min-height: 250px;
      }
      
      .dashboard-container {
        border-radius: 4px;
      }
    }
    
    @media (max-width: 480px) {
      :root {
        --sidebar-width: 240px;
        --topbar-height: 55px;
      }
      
      .menu-item .full-text {
        display: none;
      }
      
      .menu-item .abbr-text {
        display: inline;
      }
      
      .content-container {
        padding: 5px;
      }
      
      #dashboard-iframe {
        min-height: 220px;
      }
      
      .brand {
        font-size: 1.2rem;
      }
      
      .toggle-menu-btn {
        padding: 5px 10px;
        font-size: 0.8rem;
      }
      
      .topbar {
        padding: 0 8px;
      }
    }
    
    .abbr-text {
      display: none;
    }

    /* DESKTOP: AJUSTES PARA EVITAR OVERFLOW */
    @media (min-width: 993px) {
      .menu-item {
        white-space: normal;
        overflow: hidden;
        text-overflow: ellipsis;
        align-items: flex-start;
        padding-top: 10px;
        padding-bottom: 10px;
        max-width: 100%;
      }
      
      .menu-item-icon {
        margin-top: 2px;
      }
      
      .section-content {
        width: 100%;
        max-width: 100%;
      }
      
      #dashboard-iframe {
        min-height: 400px;
      }
    }
    
    /* GARANTIAS ADICIONAIS CONTRA ROLAGEM HORIZONTAL */
    .sidebar-menu, .menu-section, .section-content, .menu-item {
      max-width: 100%;
      overflow-x: hidden;
    }
    
    /* Forçar que todos os elementos respeitem a largura da tela */
    * {
      max-width: 100%;
    }
    
    /* Garantir que imagens não causem overflow */
    img {
      max-width: 100%;
      height: auto;
    }
    
    /* Garantir que o layout seja sempre contido */
    .dashboard-container, .content-container, #main-content {
      contain: layout;
    }
  </style>
</head>

<body>
  <!-- Sidebar -->
  <nav id="sidebar">
    <div class="sidebar-header">
      <img src="https://imazongeo.org.br/wp-content/uploads/2020/11/logo_imazon_geo.png" alt="Logo ImazonGeo" class="sidebar-logo" />
      <button class="toggle-sidebar" id="toggleSidebar">
        <i class="material-icons">chevron_left</i>
      </button>
    </div>
    
    <div class="sidebar-menu">
      <!-- Áreas de Proteção -->
      <div class="menu-section">
        <div class="section-header" data-section="ap">
          <div class="section-title">
            <i class="material-icons section-icon">shield</i>
            <span>Áreas de Proteção</span>
          </div>
          <i class="material-icons collapse-icon">expand_more</i>
        </div>
        <div class="section-content" id="ap-content">
          <a href="#" class="menu-item iframe-link active" data-src="/app/dashboards/AP/ameaca_geral_area_de_protecao.html">
            <i class="material-icons menu-item-icon">insert_chart</i>
            <span class="full-text">Ameaça – Áreas de Proteção</span>
            <span class="abbr-text">Ameaça – AP</span>
          </a>
          <a href="#" class="menu-item iframe-link" data-src="/app/dashboards/AP/ameaca_geral_terra_indigena.html">
            <i class="material-icons menu-item-icon">insert_chart</i>
            <span class="full-text">Ameaça – Terras Indígenas</span>
            <span class="abbr-text">Ameaça – TI</span>
          </a>
          <a href="#" class="menu-item iframe-link" data-src="/app/dashboards/AP/ameaca_geral_ucs.html">
            <i class="material-icons menu-item-icon">insert_chart</i>
            <span class="full-text">Ameaça – Unidades de Conservação</span>
            <span class="abbr-text">Ameaça – UCs</span>
          </a>
          <a href="#" class="menu-item iframe-link" data-src="/app/dashboards/AP/pressao_geral_area_de_protecao.html">
            <i class="material-icons menu-item-icon">insert_chart</i>
            <span class="full-text">Pressão – Áreas de Proteção</span>
            <span class="abbr-text">Pressão – AP</span>
          </a>
          <a href="#" class="menu-item iframe-link" data-src="/app/dashboards/AP/pressao_geral_terra_indigena.html">
            <i class="material-icons menu-item-icon">insert_chart</i>
            <span class="full-text">Pressão – Terras Indígenas</span>
            <span class="abbr-text">Pressão – TI</span>
          </a>
          <a href="#" class="menu-item iframe-link" data-src="/app/dashboards/AP/pressao_geral_ucs.html">
            <i class="material-icons menu-item-icon">insert_chart</i>
            <span class="full-text">Pressão – Unidades de Conservação</span>
            <span class="abbr-text">Pressão – UCs</span>
          </a>
        </div>
      </div>
      
      <!-- SIMEX -->
      <div class="menu-section">
        <div class="section-header" data-section="simex">
          <div class="section-title">
            <i class="material-icons section-icon">map</i>
            <span>SIMEX</span>
          </div>
          <i class="material-icons collapse-icon">expand_more</i>
        </div>
        <div class="section-content" id="simex-content">
          <a href="#" class="menu-item iframe-link" data-src="/app/dashboards/SIMEX/assentamentos.html">
            <i class="material-icons menu-item-icon">insert_chart</i>
            <span class="full-text">Assentamentos</span>
            <span class="abbr-text">Assent.</span>
          </a>
          <a href="#" class="menu-item iframe-link" data-src="/app/dashboards/SIMEX/imoveis_rurais.html">
            <i class="material-icons menu-item-icon">insert_chart</i>
            <span class="full-text">Imóveis Rurais</span>
            <span class="abbr-text">Imóv. Rurais</span>
          </a>
          <a href="#" class="menu-item iframe-link" data-src="/app/dashboards/SIMEX/municipios.html">
            <i class="material-icons menu-item-icon">insert_chart</i>
            <span class="full-text">Municípios</span>
            <span class="abbr-text">Mun.</span>
          </a>
          <a href="#" class="menu-item iframe-link" data-src="/app/dashboards/SIMEX/terras_sem_destinacao.html">
            <i class="material-icons menu-item-icon">insert_chart</i>
            <span class="full-text">Terra Sem Destinação</span>
            <span class="abbr-text">Terra S Dest</span>
          </a>
          <a href="#" class="menu-item iframe-link" data-src="/app/dashboards/SIMEX/terras_indigenas.html">
            <i class="material-icons menu-item-icon">insert_chart</i>
            <span class="full-text">Terras Indígenas</span>
            <span class="abbr-text">TI</span>
          </a>
          <a href="#" class="menu-item iframe-link" data-src="/app/dashboards/SIMEX/ucs.html">
            <i class="material-icons menu-item-icon">insert_chart</i>
            <span class="full-text">Unidades de Conservação</span>
            <span class="abbr-text">UCs</span>
          </a>
        </div>
      </div>
      
      <!-- Sistema SAD -->
      <div class="menu-section">
        <div class="section-header" data-section="sad">
          <div class="section-title">
            <i class="material-icons section-icon">analytics</i>
            <span>Sistema SAD</span>
          </div>
          <i class="material-icons collapse-icon">expand_more</i>
        </div>
        <div class="section-content" id="sad-content">
          <a href="#" class="menu-item iframe-link" data-src="/app/dashboards/SAD/degradacao_assentamentos.html">
            <i class="material-icons menu-item-icon">insert_chart</i>
            <span class="full-text">Degradação Assentamentos</span>
            <span class="abbr-text">Degrad. Assent.</span>
          </a>
          <a href="#" class="menu-item iframe-link" data-src="/app/dashboards/SAD/degradacao_estados.html">
            <i class="material-icons menu-item-icon">insert_chart</i>
            <span class="full-text">Degradação - Estados</span>
            <span class="abbr-text">Degrad. Estados</span>
          </a>
          <a href="#" class="menu-item iframe-link" data-src="/app/dashboards/SAD/degradacao_municipios.html">
            <i class="material-icons menu-item-icon">insert_chart</i>
            <span class="full-text">Degradação - Municípios</span>
            <span class="abbr-text">Degrad. Municípios</span>
          </a>
          <a href="#" class="menu-item iframe-link" data-src="/app/dashboards/SAD/degradacao_terras_indigenas.html">
            <i class="material-icons menu-item-icon">insert_chart</i>
            <span class="full-text">Degradação - Terras Indígenas</span>
            <span class="abbr-text">Degrad. TI</span>
          </a>
          <a href="#" class="menu-item iframe-link" data-src="/app/dashboards/SAD/degradacao_unidades_de_conservacao.html">
            <i class="material-icons menu-item-icon">insert_chart</i>
            <span class="full-text">Degradação - Unidades de Conservação</span>
            <span class="abbr-text">Degrad. UCs</span>
          </a>
          <a href="#" class="menu-item iframe-link" data-src="/app/dashboards/SAD/desmatamento_assentamentos.html">
            <i class="material-icons menu-item-icon">insert_chart</i>
            <span class="full-text">Desmatamentos - Assentamentos</span>
            <span class="abbr-text">Desmat. Assent.</span>
          </a>
          <a href="#" class="menu-item iframe-link" data-src="/app/dashboards/SAD/desmatamento_estados.html">
            <i class="material-icons menu-item-icon">insert_chart</i>
            <span class="full-text">Desmatamentos - Estados</span>
            <span class="abbr-text">Desmat. Estados</span>
          </a>
          <a href="#" class="menu-item iframe-link" data-src="/app/dashboards/SAD/desmatamento_municipios.html">
            <i class="material-icons menu-item-icon">insert_chart</i>
            <span class="full-text">Desmatamentos - Municípios</span>
            <span class="abbr-text">Desmat. Municípios</span>
          </a>
          <a href="#" class="menu-item iframe-link" data-src="/app/dashboards/SAD/desmatamento_terras_indigenas.html">
            <i class="material-icons menu-item-icon">insert_chart</i>
            <span class="full-text">Desmatamentos - Terras Indígenas</span>
            <span class="abbr-text">Desmat. TI</span>
          </a>
          <a href="#" class="menu-item iframe-link" data-src="/app/dashboards/SAD/desmatamento_unidades_de_conservacao.html">
            <i class="material-icons menu-item-icon">insert_chart</i>
            <span class="full-text">Desmatamentos - Unidades de Conservação</span>
            <span class="abbr-text">Desmat. UCs</span>
          </a>
        </div>
      </div>
    </div>
    
    <!-- Ícones para sidebar colapsada -->
    <div class="collapsed-section">
      <div class="collapsed-icon" data-section="ap">
        <i class="material-icons">shield</i>
      </div>
      <div class="collapsed-icon" data-section="simex">
        <i class="material-icons">map</i>
      </div>
      <div class="collapsed-icon" data-section="sad">
        <i class="material-icons">analytics</i>
      </div>
    </div>
  </nav>
  
  <!-- Overlay para mobile -->
  <div class="sidebar-overlay" id="sidebarOverlay"></div>
  
  <!-- Conteúdo Principal -->
  <div id="main-content">
    <!-- Topbar -->
    <div class="topbar">
      <button class="toggle-menu-btn" id="sidebarCollapse">
        <i class="material-icons">menu</i>
        <span>Menu</span>
      </button>
      <div class="brand">
        <span class="amarelo">Imazon</span><span class="verde">Geo</span>
      </div>
    </div>
    
    <!-- Container do Dashboard -->
    <div class="content-container">
      <div class="dashboard-container">
        <!-- Iframe para dashboards -->
        <iframe id="dashboard-iframe" loading="lazy" src="/app/dashboards/AP/ameaca_geral_area_de_protecao.html"></iframe>
      </div>
    </div>
    
    <!-- Footer -->
    <footer>
      <p>
        <a href="/">Imazon</a>&nbsp;
        <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">
          <img src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png" alt="Licença CC-BY-SA" />
        </a>
      </p>
      <div class="version">v1.0.0</div>
    </footer>
  </div>

  <script>
  document.addEventListener('DOMContentLoaded', () => {
    const iframe = document.getElementById('dashboard-iframe');
    const links = document.querySelectorAll('.iframe-link');
    const collapsedIcons = document.querySelectorAll('.collapsed-icon');
    const sidebarOverlay = document.getElementById('sidebarOverlay');
    const body = document.body;
    const toggleSidebarBtn = document.getElementById('toggleSidebar');
    const sidebarCollapseBtn = document.getElementById('sidebarCollapse');
    
    // FUNÇÃO PARA GARANTIR QUE NÃO HAJA ROLAGEM HORIZONTAL
    function preventHorizontalScroll() {
      // Força a remoção de qualquer rolagem horizontal
      document.documentElement.style.overflowX = 'hidden';
      document.body.style.overflowX = 'hidden';
      
      // Garante que a largura não exceda a viewport
      const maxWidth = window.innerWidth;
      document.documentElement.style.maxWidth = maxWidth + 'px';
      document.body.style.maxWidth = maxWidth + 'px';
    }
    
    // Aplicar prevenção de rolagem horizontal
    preventHorizontalScroll();
    
    // Carregar primeiro dashboard
    if (links.length) {
      links[0].classList.add('active');
      iframe.src = links[0].dataset.src;
    }
    
    // Seções recolhíveis
    document.querySelectorAll('.section-header').forEach(header => {
      header.addEventListener('click', () => {
        const sectionId = header.dataset.section;
        const content = document.getElementById(`${sectionId}-content`);
        const icon = header.querySelector('.collapse-icon');
        
        content.classList.toggle('expanded');
        icon.textContent = content.classList.contains('expanded') ? 'expand_less' : 'expand_more';
      });
    });
    
    // Troca de dashboard
    links.forEach(link => {
      link.addEventListener('click', ev => {
        ev.preventDefault();
        const url = link.dataset.src;
        if (!url) return;

        links.forEach(l => l.classList.remove('active'));
        link.classList.add('active');
        
        // Atualizar iframe
        iframe.src = url;
        
        // Fechar sidebar em mobile
        if (window.innerWidth <= 992) {
          body.classList.remove('sidebar-expanded');
          sidebarOverlay.style.display = 'none';
        }
      });
    });
    
    // Expandir seções pelos ícones colapsados
    collapsedIcons.forEach(icon => {
      icon.addEventListener('click', () => {
        const sectionId = icon.dataset.section;
        const content = document.getElementById(`${sectionId}-content`);
        const header = document.querySelector(`.section-header[data-section="${sectionId}"]`);
        const iconElem = header.querySelector('.collapse-icon');
        
        content.classList.add('expanded');
        iconElem.textContent = 'expand_less';
      });
    });
    
    // Controle da sidebar pelo botão do topo
    sidebarCollapseBtn.addEventListener('click', () => {
      if (window.innerWidth <= 992) {
        body.classList.toggle('sidebar-expanded');
        sidebarOverlay.style.display = body.classList.contains('sidebar-expanded') ? 'block' : 'none';
      } else {
        body.classList.toggle('sidebar-collapsed');
      }
    });
    
    // Controle da sidebar pelo botão interno
    toggleSidebarBtn.addEventListener('click', () => {
      body.classList.toggle('sidebar-collapsed');
    });
    
    // Fechar sidebar ao clicar no overlay
    sidebarOverlay.addEventListener('click', () => {
      if (window.innerWidth <= 992) {
        body.classList.remove('sidebar-expanded');
        sidebarOverlay.style.display = 'none';
      }
    });
    
    // Iniciar com a primeira seção expandida
    if (document.querySelector('.section-header')) {
      document.querySelector('.section-header').click();
    }
    
    // Função para ajustar o iframe quando necessário
    function adjustIframe() {
      // Garantir que o iframe não cause overflow
      const containerWidth = iframe.parentElement.offsetWidth;
      iframe.style.width = '100%';
      iframe.style.maxWidth = containerWidth + 'px';
      
      // Enviar mensagem para o iframe filho sobre mudança de tamanho
      try {
        if (iframe.contentWindow) {
          iframe.contentWindow.postMessage({
            type: 'resize',
            width: containerWidth,
            height: iframe.offsetHeight
          }, '*');
        }
      } catch (e) {
        // Ignorar erros de cross-origin
      }
    }
    
    // Redimensionar quando a janela mudar de tamanho
    let resizeTimeout;
    window.addEventListener('resize', () => {
      clearTimeout(resizeTimeout);
      resizeTimeout = setTimeout(() => {
        preventHorizontalScroll();
        adjustIframe();
      }, 250);
    });
    
    // Ajustar iframe quando carregado
    iframe.addEventListener('load', () => {
      setTimeout(() => {
        adjustIframe();
      }, 500);
    });
    
    // Escutar mensagens do iframe filho
    window.addEventListener('message', (event) => {
      if (event.source === iframe.contentWindow) {
        if (event.data.type === 'contentLoaded') {
          adjustIframe();
        }
      }
    });
    
    // Detectar mudanças de orientação em dispositivos móveis
    window.addEventListener('orientationchange', () => {
      setTimeout(() => {
        preventHorizontalScroll();
        adjustIframe();
      }, 500);
    });
    
    // Monitorar e prevenir rolagem horizontal continuamente
    setInterval(preventHorizontalScroll, 1000);
  });
  </script>
</body>
</html>

